(this["webpackJsonpreact-project-battleships"]=this["webpackJsonpreact-project-battleships"]||[]).push([[0],{11:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),i=a.n(c),r=a(6),s=a.n(r),o=(a(21),a(22),a(4)),d=a(31),l=a(3),h=function(e,t,a){var n=e.ships[parseInt(e.board[a-1][t-1])-1];n.hit(),e.board[a-1][t-1]="\u203b",m(n,e)},m=function(e,t){e.isSunk()&&(t.markShipArea("\u2022",e),t.shipCount--,t.checkGameOver(),!0===t.isGameOver&&console.log("GAME OVER!"))},u=function e(t){var a=Math.ceil(10*Math.random()),n=Math.ceil(10*Math.random());if(t.gameBoard.receiveAttack(a,n)){if(t.gameBoard.receiveAttack(a,n),"\u203b"===t.gameBoard.board[n])return!0}else e(t)},p=10,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ship",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",n={name:e,size:t,direction:a,hitState:Array(t).fill("o"),hit:function(){var e=n.hitState.findIndex((function(e){return"o"===e}));n.hitState[e]="hit"},isSunk:function(){return!n.hitState.includes("o")}};return n},b=function(e,t){var a=function(){var e={side:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",board:[],ships:[],shipCount:0,isReady:!1,isGameOver:!1,emptyBoard:function(){return[["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"]]},makeBoard:function(){e.board=e.emptyBoard(),e.shipCount=0,e.isReady=!1,e.isGameOver=!1},createShips:function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?[j("TIE-fighter",1),j("TIE-fighter",1),j("TIE-bomber",2),j("TIE-bomber",2),j("Star Destroyer",3),j("Super Star Destroyer",4)]:[j("Shuttle",1),j("Shuttle",1),j("X-wing starfighter",2),j("X-wing starfighter",2),j("CR90 corvette",3),j("MC80 Star Cruiser",4)]},getShips:function(){var t=e.createShips();return t.map((function(e,t){return e.id=t+1})),e.ships=t,t},changeShipDirection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"horizontal"===e.direction&&e.size>1?e.direction="vertical":e.direction="horizontal"},receiveAttack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.board[a-1][t-1];return"\u2022"!==n&&"\u203b"!==n&&("_"===n||"*"===n?e.board[a-1][t-1]="\u2022":Number.isInteger(parseInt(n))&&h(e,t,a),!0)},checkPlacement:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a=parseFloat(a),n=parseFloat(n);var c=!0;if("horizontal"===t.direction){if(t.size+a-1>p)return void(c=!1);for(var i=0;i<t.size;i++)if("_"!==e.board[n-1][a-1+i])return void(c=!1)}else if("vertical"===t.direction){if(t.size+n-1>p)return void(c=!1);for(var r=0;r<t.size;r++)"_"!==e.board[n-1+r][a-1]&&(c=!1)}return c},placeShip:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!!(e.shipCount<6&&e.checkPlacement(t,a,n))&&("horizontal"===t.direction?t.hitState.forEach((function(c,i){e.board[n-1][a-1+i]="".concat(t.id)})):"vertical"===t.direction&&t.hitState.forEach((function(c,i){e.board[n-1+i][a-1]="".concat(t.id)})),e.markShipArea("*",t,a,n),t.onBoard=!0,t.coordinates=[parseFloat(a),parseFloat(n)],e.shipCount++,6===e.shipCount&&(e.isReady=!0),!0)},markShipArea:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u2022",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.coordinates[0],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.coordinates[1];a.hitState.forEach((function(i,r){"horizontal"===a.direction?(c<p&&(e.board[c][n-1+r]="".concat(t)),c>1&&(e.board[c-2][n-1+r]="".concat(t)),n>1&&(c>1&&(e.board[c-2][n-2]="".concat(t)),e.board[c-1][n-2]="".concat(t),c<p&&(e.board[c][n-2]="".concat(t))),n-1+a.size<p&&(c>1&&(e.board[c-2][n-1+a.size]="".concat(t)),e.board[c-1][n-1+a.size]="".concat(t),c<p&&(e.board[c][n-1+a.size]="".concat(t)))):"vertical"===a.direction&&(n<p&&(e.board[c-1+r][n]="".concat(t)),n>1&&(e.board[c-1+r][n-2]="".concat(t)),c>1&&(n>1&&(e.board[c-2][n-2]="".concat(t)),e.board[c-2][n-1]="".concat(t),n<p&&(e.board[c-2][n]="".concat(t))),c-1+a.size<p&&(n>1&&(e.board[c-1+a.size][n-2]="".concat(t)),e.board[c-1+a.size][n-1]="".concat(t),n<p&&(e.board[c-1+a.size][n]="".concat(t))))}))},placeShipsAtRandom:function(){for(var t=Object(l.a)(e.ships).reverse();e.shipCount<6;)t.forEach((function(t){e.randomlyPlaceShip(t)}))},randomlyPlaceShip:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!0!==t.onBoard){var a=Math.ceil(Math.random()*p),n=Math.ceil(Math.random()*p);2*Math.random()>1&&e.changeShipDirection(t),e.placeShip(t,a,n),e.randomlyPlaceShip(t)}},checkGameOver:function(){return 0===e.shipCount&&(e.isGameOver=!0,!0)}};return e}(e);return a.makeBoard(),a.getShips("".concat(e)),"computer"===t&&a.placeShipsAtRandom(),function(e,t){return{name:e,side:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"human",gameBoard:arguments.length>3?arguments[3]:void 0,lastAIMove:"",nextAIMove:"",isWinner:!1,isMakingMove:!1,makeMove:function(e,t,a){return!!e.gameBoard.receiveAttack(t,a)},makeAIMove:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||u(e)}}}("dark"===e?"Lord Sith":"Jedi Master",e,t,a)},g=a(12),f=function(){return Object(n.jsxs)("header",{className:"header",children:[Object(n.jsxs)("div",{className:"header-row",children:[Object(n.jsxs)("h1",{className:"col-sm-8",children:[Object(n.jsx)("span",{className:"title-main",children:"starships "})," "]}),Object(n.jsx)("a",{href:"https://github.com/wblachut/react-project-battleships",className:"gh-btn",children:Object(n.jsx)(g.a,{icon:["fab","github"],className:"gh-icon"})})]}),Object(n.jsx)("nav",{})]})},v=(a(11),function(e){var t=e.setAppStatus;return Object(n.jsx)("div",{className:"fade",children:Object(n.jsx)("section",{className:"star-wars-intro",onClick:function(){t("newGame")},children:Object(n.jsxs)("div",{className:"crawl",children:[Object(n.jsxs)("div",{className:"title",children:[Object(n.jsx)("p",{children:"Episode XII"}),Object(n.jsx)("h1",{children:"The Starships"})]}),Object(n.jsx)("p",{children:"It is a browser battleships game react application styled on the Star Wars movie by George Lucas. This project was realized on learning purpose for The Odin Project curriculum. Main aim of the project is to build game logic using Test Driven Development. I hope you enjoy it."}),Object(n.jsx)("br",{}),Object(n.jsx)("p",{className:"p-center",children:"Confront the sith lord..."}),Object(n.jsx)("br",{}),Object(n.jsx)("p",{className:"p-center",children:"May the force be with you jedi master."}),Object(n.jsx)("br",{}),Object(n.jsx)("p",{className:"p-center",children:"Click on the screen to continue!"})]})})})}),O=function(e){var t=e.setAppStatus,a=e.setWinner;return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"new-game",children:Object(n.jsx)("div",{className:"new-game-wrapper"})}),Object(n.jsx)("button",{className:"new-game-btn star-btn",onClick:function(){t("game"),a(null)},children:"Contend the Empire"})]})},_=(a(28),function(e){var t=e.player,a=e.board,c=e.isGameReady;return Object(n.jsxs)("div",{className:"".concat(t.side," game-board"),children:[Object(n.jsxs)("div",{className:"".concat(t.side," side-title"),children:["The ",t.side," side"]}),Object(n.jsxs)("div",{className:"outer-wrapper",children:[Object(n.jsxs)("div",{className:"board-wrapper",children:[Object(n.jsx)("div",{className:"column-description",children:a.map((function(e,t){return Object(n.jsxs)("div",{className:"numbers",children:[" ",[t+1]," "]},[t+1])}))}),Object(n.jsxs)("div",{className:"inner-wrapper",children:[Object(n.jsxs)("div",{className:"".concat(t.side," row-description"),children:[" ",a.map((function(e,t){return Object(n.jsxs)("div",{className:"letters",children:[" ",(t+10).toString(36)," "]},"letter".concat(t))}))]}),Object(n.jsxs)("div",{className:"".concat(t.side," grid-wrapper ").concat(t.type),children:[t.gameBoard.board.map((function(a,i){return a.map((function(a,r){if("human"===t.type){if("_"===a||"*"===a)return"_"!==a||c?Object(n.jsx)("div",{className:"cell","data-cord":[i+1,r+1]},[i+1,r+1]):Object(n.jsx)("div",{className:"cell droppable","data-cord":[i+1,r+1],onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault(),e.target.classList.add("hover")},onDragLeave:function(e){e.preventDefault(),e.target.classList.remove("hover")},onDrop:function(t){return e.onPlaceShip(t)}},[i+1,r+1]);if(Number.isInteger(parseInt(a))){var s=t.gameBoard.ships[a-1];return Object(n.jsx)("div",{className:"cell ship ship".concat(s.id),"data-cord":[i+1,r+1],children:parseFloat(s.coordinates[0])===r+1&&parseFloat(s.coordinates[1])===i+1&&Object(n.jsx)("img",{className:"ship-img-grid ".concat(s.direction),src:"/react-project-battleships"+"/images/".concat(t.side).concat(s.id,".png"),alt:"ship-".concat(t.side).concat(s.id)})},[i+1,r+1])}return"\u203b"===a?Object(n.jsx)("div",{className:"cell hit ship","data-cord":[i+1,r+1],children:Object(n.jsx)("img",{className:"flame-gif",src:"/react-project-battleships/images/flame.gif",alt:"flames"})},[i+1,r+1]):Object(n.jsx)("div",{className:"cell empty","data-cord":[i+1,r+1],children:"\u2022"},[i+1,r+1])}return"\u2022"===a?Object(n.jsx)("div",{className:"cell empty","data-cord":[i+1,r+1],children:"\u2022"},[i+1,r+1]):"\u203b"===a?Object(n.jsx)("div",{className:"cell hit","data-cord":[i+1,r+1],children:Object(n.jsx)("img",{className:"flame-gif",src:"/react-project-battleships/images/flame.gif",alt:"as"})},[i+1,r+1]):Object(n.jsx)("div",{className:"cell","data-cord":[i+1,r+1],onClick:function(t){return e.onMakeMove(t)}},[i+1,r+1])}))}))," "]})]})]}),!c&&Object(n.jsxs)("div",{className:"ship-menage-wrapper",children:[Object(n.jsxs)("div",{className:"button-container",children:[Object(n.jsx)("button",{className:"star-btn",onClick:e.onPlaceRandomly,children:"Place randomly"}),Object(n.jsx)("button",{className:"star-btn",onClick:e.onResetBoard,children:"Reset Board"}),Object(n.jsx)("button",{className:"star-btn",onClick:e.onFlipShips,children:"Flip Ships"})]}),Object(n.jsx)("div",{className:"ship-wrapper",children:t.gameBoard.ships.map((function(e){return!e.onBoard&&Object(n.jsx)("div",{className:"ship-view ".concat(e.direction),children:Object(n.jsx)("img",{className:"ship-img ".concat(e.direction),src:"/react-project-battleships"+"/images/".concat(t.side).concat(e.id,".png"),alt:"ship-".concat(t.side).concat(e.id),"data-ship":e.id,draggable:!0,onDragStart:function(e){e.dataTransfer.setData("ship",e.target.dataset.ship)}},"ship-".concat(t.side).concat(e.id))},"ship".concat(e.id))}))})]})]}),!c&&Object(n.jsx)("div",{className:"button-container",children:Object(n.jsx)("button",{className:"start-game-btn star-btn",onClick:e.onStartGame,children:"Start Game"})})]})}),x=_;_.defaultProps={isGameReady:!1,onMakeMove:function(){},onPlaceShip:function(){},onFlipShips:function(){},onPlaceRandomly:function(){},onResetBoard:function(){},onStartGame:function(){}};var S=function(e){var t=e.player,a=e.opponent,i=Object(c.useState)(!1),r=Object(o.a)(i,2),s=r[0],d=r[1],h=Object(c.useState)(Object(l.a)(t.gameBoard.board)),m=Object(o.a)(h,2),u=m[0],p=m[1],j=Object(c.useState)(Object(l.a)(a.gameBoard.board)),b=Object(o.a)(j,2),g=b[0],f=b[1],v=Object(c.useState)(a.gameBoard.shipCount),O=Object(o.a)(v,2),_=O[0],S=O[1];Object(c.useEffect)((function(){k()}),[u]),Object(c.useEffect)((function(){w()}),[_]);var N=function(){t.gameBoard.makeBoard(),t.gameBoard.getShips(),p(Object(l.a)(t.gameBoard.board))},y=function(){a.makeAIMove(t),p(Object(l.a)(t.gameBoard.board)),t.gameBoard.isGameOver&&B(a)},B=function(t){setTimeout((function(){e.setWinner(t),e.setAppStatus("announcer")}),500)},k=function(){t.gameBoard.ships.map((function(e){M(t,e)}))},w=function(){a.gameBoard.ships.map((function(e){!0===e.isSunk()&&M(a,e)}))},M=function(e,t){if(t.onBoard){var a=[t.coordinates[1],t.coordinates[0]],n=document.querySelector(".".concat(e.side)).querySelector('div[data-cord="'.concat(a,'"]'));if(!n.querySelector(".ship-img-grid")){var c=document.createElement("img");c.src="/react-project-battleships"+"/images/".concat(e.side).concat(t.id,".png"),c.alt="ship-".concat(e.side).concat(t.id),c.classList.add("ship-img-grid"),c.classList.add(t.direction),c.targetAble=!1,n.appendChild(c)}}};return Object(n.jsx)("div",{children:s?Object(n.jsxs)("div",{className:"game",children:[Object(n.jsx)(x,{player:t,board:u,isGameReady:s}),Object(n.jsx)(x,{player:a,board:g,onMakeMove:function(e){var n=e.target.dataset.cord.split(",")[0],c=e.target.dataset.cord.split(",")[1];!0===t.makeMove(a,c,n)&&(f(Object(l.a)(a.gameBoard.board)),S(a.gameBoard.shipCount),a.gameBoard.isGameOver&&B(t),y())},isGameReady:s})]}):Object(n.jsx)("div",{className:"game",children:Object(n.jsx)(x,{player:t,board:u,isGameReady:s,setGameReady:d,onFlipShips:function(){t.gameBoard.ships.forEach((function(e){e.onBoard||t.gameBoard.changeShipDirection(e)})),p(Object(l.a)(t.gameBoard.board)),document.querySelector(".ship-wrapper").classList.toggle("flipped")},onPlaceShip:function(e){var a=e.target.dataset.cord.split(",")[0],n=e.target.dataset.cord.split(",")[1],c=e.dataTransfer.getData("ship"),i=t.gameBoard.ships[c-1];t.gameBoard.placeShip(i,n,a),p(Object(l.a)(t.gameBoard.board))},onPlaceRandomly:function(){N(),t.gameBoard.placeShipsAtRandom(),p(Object(l.a)(t.gameBoard.board))},onResetBoard:N,onStartGame:function(){t.gameBoard.isReady&&d(!0)}})})})},N=S;S.defaultProps={setBoard:function(){},setOpponentBoard:function(){},gameReady:!1,setGameReady:function(){},setWinner:function(){},setAppStatus:function(){}};var y=function(e){var t=e.winner,a=e.setAppStatus;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"announcer ".concat(t.side),children:[Object(n.jsxs)("h1",{children:[t.name," has won!"]}),"light"===t.side&&Object(n.jsxs)("h2",{children:["Hrrmmm. A true leader you are. About your tactical prowess all galaxies should know !",Object(n.jsx)("div",{className:"img-wrapper ".concat(t.side)})]}),"dark"===t.side&&Object(n.jsxs)("h2",{children:["You don\u2019t know the power of the dark side! I must obey my master..."," ",Object(n.jsx)("div",{className:"img-wrapper ".concat(t.side)})]})]}),Object(n.jsx)("button",{className:"new-game-btn star-btn",onClick:function(){a("newGame")},children:"Play again!"})]})},B=(a(29),function(){var e=Object(c.useState)("intro"),t=Object(o.a)(e,2),a=t[0],i=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),l=s[0],h=s[1],m=b("light","human"),u=b("dark","computer");console.clear();var p=2e3;return Object(n.jsxs)("div",{children:[Object(n.jsx)(f,{}),Object(n.jsx)(d.a,{in:"intro"===a,timeout:p,classNames:"trans",unmountOnExit:!0,onExited:function(){return i("newGame")},children:Object(n.jsx)(v,{setAppStatus:i,appStatus:a})}),Object(n.jsx)(d.a,{in:"newGame"===a,timeout:p,classNames:"trans",unmountOnExit:!0,children:Object(n.jsx)(O,{setAppStatus:i,setWinner:h})}),Object(n.jsx)(d.a,{in:"game"===a,timeout:p,classNames:"trans",unmountOnExit:!0,children:Object(n.jsx)(N,{player:m,opponent:u,setWinner:h,winner:l,setAppStatus:i})}),Object(n.jsx)(d.a,{in:"announcer"===a,timeout:p,classNames:"trans",unmountOnExit:!0,children:Object(n.jsx)(y,{winner:l,setAppStatus:i})}),Object(n.jsx)("div",{className:"stars"}),Object(n.jsx)("div",{className:"twinkling"})]})}),k=a(5),w=a(13);k.b.add(w.a),s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.fc133e94.chunk.js.map