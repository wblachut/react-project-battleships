(this["webpackJsonpreact-project-battleships"]=this["webpackJsonpreact-project-battleships"]||[]).push([[0],{19:function(e,a,t){},20:function(e,a,t){},26:function(e,a,t){},27:function(e,a,t){},28:function(e,a,t){"use strict";t.r(a);var c=t(0),i=t(2),r=t.n(i),n=t(10),o=t.n(n),s=(t(19),t(20),t(4)),d=t(13),l=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",c={name:e,size:a,direction:t,hitState:Array(a).fill("o"),hit:function(){var e=c.hitState.findIndex((function(e){return"o"===e}));c.hitState[e]="hit"},isSunk:function(){return!c.hitState.includes("o")}};return c},h=function(e){var a={side:e,board:[],ships:[],shipCount:0,isReady:!1,isGameOver:!1,emptyBoard:function(){return[["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"]]},makeBoard:function(){a.board=a.emptyBoard()},getShips:function(e){var t,c,i,r,n,o,s=[];return"dark"===e?(t=l("TIE-fighter",1),c=l("TIE-fighter",1),i=l("TIE-bomber",2),r=l("TIE-bomber",2),n=l("Star Destroyer",3),o=l("Super Star Destroyer",4),s.push(t,c,i,r,n,o)):(t=l("Shuttle",1),c=l("Shuttle",1),i=l("X-wing",2),r=l("X-wing",2),n=l("Rebel heavy ship",3),o=l("Rebel Super Ship",4),s.push(t,c,i,r,n,o)),s.map((function(e,a){return e.id=a+1})),a.ships=s,s},changeShipDirection:function(e){"horizontal"===e.direction&&e.size>1?e.direction="vertical":e.direction="horizontal"},receiveAttack:function(e,t){var c=!0,i=a.board[t-1][e-1];if("_"===i||"*"===i)a.board[t-1][e-1]="\u2022",console.log("miss !!");else if(Number.isInteger(parseInt(i))){var r=a.ships[parseInt(i)-1];r.hit(),console.log("hit a ship! field number: ".concat(parseInt(i),", attacked id: ").concat(r.id)),a.board[t-1][e-1]="\u203b",r.isSunk()&&(console.log("".concat(r.name," was destroyed")),a.markShipArea("\u2022",r),a.shipCount--,a.checkGameOver(),!0===a.isGameOver&&console.info("Game Over"))}else c=!1;return c},checkPlacement:function(e,t,c){var i=!0;if("horizontal"===e.direction){e.size+t-1>10&&(i=!1);for(var r=0;r<3;r++){var n=c-2+r;if(0<=n&&n<=9)for(var o=0;o<e.size+2;o++){var s=t-2+o;0<=s&&s<=9&&"_"!==a.board[n][s]&&(i=!1)}}}else if("vertical"===e.direction){e.size+c-1>10&&(i=!1);for(var d=0;d<3;d++){var l=t-2+d;if(0<=l&&l<=9)for(var h=0;h<e.size+2;h++){var m=c-2+h;0<=m&&m<=9&&"_"!==a.board[m][l]&&(i=!1)}}}return i?console.log("legal place"):console.log("Illegal place!"),i},placeShip:function(e,t,c){a.checkPlacement(e,t,c)&&("horizontal"===e.direction?e.hitState.forEach((function(i,r){a.board[c-1][t-1+r]="".concat(e.id)})):"vertical"===e.direction&&e.hitState.forEach((function(i,r){a.board[c-1+r][t-1]="".concat(e.id)})),a.markShipArea("*",e,t,c),e.onBoard=!0,e.coordinates=[t,c],console.log("".concat(e.name," was placed ").concat(e.direction," on ").concat(e.coordinates)),a.shipCount++,6===a.shipCount&&(a.isReady=!0))},markShipArea:function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.coordinates[0],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.coordinates[1];t.hitState.forEach((function(r,n){"horizontal"===t.direction?(i<10&&(a.board[i][c-1+n]="".concat(e)),i>1&&(a.board[i-2][c-1+n]="".concat(e)),c>1&&(i>1&&(a.board[i-2][c-2]="".concat(e)),a.board[i-1][c-2]="".concat(e),i<10&&(a.board[i][c-2]="".concat(e))),c+t.size<10&&(i>1&&(a.board[i-2][c-1+t.size]="".concat(e)),a.board[i-1][c-1+t.size]="".concat(e),i<10&&(a.board[i][c-1+t.size]="".concat(e)))):"vertical"===t.direction&&(c<10&&(a.board[i-1+n][c]="".concat(e)),c>1&&(a.board[i-1+n][c-2]="".concat(e)),i>1&&(c>1&&(a.board[i-2][c-2]="".concat(e)),a.board[i-2][c-1]="".concat(e),c<10&&(a.board[i-2][c]="".concat(e))),i+t.size<10&&(c>1&&(a.board[i-1+t.size][c-2]="".concat(e)),a.board[i-1+t.size][c-1]="".concat(e),c<10&&(a.board[i-1+t.size][c]="".concat(e))))}))},placeShipsAtRandom:function(){for(var e=Object(d.a)(a.ships).reverse();a.shipCount<6;)e.forEach((function(e){a.randomlyPlaceShip(e)}))},randomlyPlaceShip:function(e){if(!0!==e.onBoard){var t=Math.ceil(10*Math.random()),c=Math.ceil(10*Math.random());2*Math.random()>1&&a.changeShipDirection(e),a.placeShip(e,t,c),a.randomlyPlaceShip(e)}},checkGameOver:function(){return 0===a.shipCount&&(a.isGameOver=!0,!0)}};return a},m=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"human",c=arguments.length>3?arguments[3]:void 0,i={name:e,side:a,type:t,gameBoard:c,isWinner:!1,isMakingMove:!1,makeMove:function(e,a,t){return e.gameBoard.receiveAttack(a,t)?(e.gameBoard.receiveAttack(a,t),!0):(console.log("NOT A LEGAL MOVE"),!1)},makeAIMove:function(e){var a=Math.ceil(10*Math.random()),t=Math.ceil(10*Math.random()),c=e.gameBoard.receiveAttack(a,t);if(console.log("AI Move:",a,t,"was legal?",c),c)return e.gameBoard.receiveAttack(a,t),!0;i.makeAIMove(e)},passMove:function(e){i.isMakingMove=!1,e.isMakingMove=!0},hasWon:function(e){!0===e.isGameOver?i.isWinner=!0:i.isWinner=!1}};return i},u=function(e,a){if("light"===e){var t=h("light side");return t.makeBoard(),t.getShips(),t.placeShipsAtRandom(),m("Jedi Master",e,a,t)}if("dark"===e){var c=h("dark side");return c.makeBoard(),c.getShips("dark"),c.placeShipsAtRandom(),m("Lord Sith",e,a,c)}},p=t(11),b=function(){return Object(c.jsxs)("header",{className:"header",children:[Object(c.jsxs)("div",{className:"header-row",children:[Object(c.jsxs)("h1",{className:"col-sm-8",children:[Object(c.jsx)("span",{className:"title1",children:"SpaceShips "})," "]}),Object(c.jsx)("a",{href:"https://github.com/wblachut/react-project-battleships",className:"gh-btn",children:Object(c.jsx)(p.a,{icon:["fab","github"],className:"gh-icon"})}),Object(c.jsx)("i",{className:"fab fa-github"})]}),Object(c.jsx)("nav",{})]})},_=(t(26),function(e){var a=e.player,t=e.opponent,r=Object(i.useState)(a.gameBoard.board),n=Object(s.a)(r,2),o=n[0],d=n[1],l=Object(i.useState)(t.gameBoard.board),h=Object(s.a)(l,2),m=h[0],u=h[1],p=Object(i.useState)(a.gameBoard.shipCount),b=Object(s.a)(p,2),_=b[0],f=b[1];console.log(m),Object(i.useEffect)((function(){v()}),[]),Object(i.useEffect)((function(){g(),console.log("use Effect:",_)}),[_]);var j=function(){a.makeAIMove(t),u(t.gameBoard.board)},v=function(){"human"===a.type&&a.gameBoard.ships.map((function(e){O(e)}))},g=function(){"computer"===a.type&&a.gameBoard.ships.map((function(e){!0===e.isSunk()&&O(e)}))},O=function(e){var t=[e.coordinates[1],e.coordinates[0]],c=document.querySelector(".".concat(a.side)).querySelector('div[data-cord="'.concat(t,'"]'));if(!c.querySelector(".ship-img-grid")){var i=document.createElement("img");i.src="/react-project-battleships"+"/images/".concat(a.side).concat(e.id,".png"),i.alt="ship-".concat(a.side).concat(e.id),i.classList.add("ship-img-grid"),i.classList.add(e.direction),i.targetAble=!1,c.appendChild(i)}};return Object(c.jsxs)("div",{className:"".concat(a.side," gameBoard"),children:[Object(c.jsxs)("div",{className:"".concat(a.side," side-title"),children:["The ",a.side," side"]}),Object(c.jsxs)("div",{className:"board-wrapper",children:[Object(c.jsx)("div",{className:"column-description",children:o.map((function(e,a){return Object(c.jsxs)("div",{className:"numbers",children:[" ",[a+1]," "]},[a+1])}))}),Object(c.jsxs)("div",{className:"inner-wrapper",children:[Object(c.jsxs)("div",{className:"".concat(a.side," row-description"),children:[" ",o.map((function(e,a){return Object(c.jsxs)("div",{className:"letters",children:[" ",(a+10).toString(36)," "]},"letter".concat(a))}))]}),Object(c.jsxs)("div",{className:"".concat(a.side," grid-wrapper"),children:[o.map((function(e,i){return e.map((function(e,r){if("human"===a.type){if("_"===e||"*"===e)return Object(c.jsx)("div",{className:"cell","data-cord":[i+1,r+1]},[i+1,r+1]);if(Number.isInteger(parseInt(e))){var n=a.gameBoard.ships[e-1];return Object(c.jsx)("div",{className:"cell ship ship".concat(n.id),"data-cord":[i+1,r+1]},[i+1,r+1])}return"\u203b"===e?Object(c.jsx)("div",{className:"cell hit ship","data-cord":[i+1,r+1],children:Object(c.jsx)("img",{className:"flame-gif",src:"/react-project-battleships/images/flame.gif",alt:"flames"})},[i+1,r+1]):Object(c.jsx)("div",{className:"cell empty","data-cord":[i+1,r+1],children:"\u2022"},[i+1,r+1])}return"\u2022"===e?Object(c.jsx)("div",{className:"cell empty","data-cord":[i+1,r+1],children:"\u2022"},[i+1,r+1]):"\u203b"===e?Object(c.jsx)("div",{className:"cell hit","data-cord":[i+1,r+1],children:Object(c.jsx)("img",{className:"flame-gif",src:"/react-project-battleships/images/flame.gif",alt:"as"})},[i+1,r+1]):Object(c.jsx)("div",{className:"cell","data-cord":[i+1,r+1],onClick:function(e){return function(e){var c=e.target.dataset.cord.split(",")[0],i=e.target.dataset.cord.split(",")[1];t.makeMove(a,i,c),d(a.gameBoard.board),f(a.gameBoard.shipCount),j()}(e)}},[i+1,r+1])}))}))," "]})]})]}),Object(c.jsx)("div",{className:"ship-wrapper",children:a.gameBoard.ships.map((function(e){return Object(c.jsx)("div",{className:"ship-view"},"ship".concat(e.id))}))})]})}),f=r.a.memo(_),j=function(e){return Object(c.jsxs)("div",{className:"game",children:[Object(c.jsx)(f,{player:e.PlayerOne,opponent:e.PlayerTwo}),Object(c.jsx)(f,{player:e.PlayerTwo,opponent:e.PlayerOne})]})},v=(t(27),function(){var e=u("light","human"),a=u("dark","computer"),t=Object(i.useState)(""),r=Object(s.a)(t,2),n=r[0],o=r[1];return console.clear(),Object(c.jsxs)("div",{children:[Object(c.jsx)(b,{}),Object(c.jsx)(j,{PlayerOne:e,PlayerTwo:a,setWinner:o,winner:n}),Object(c.jsx)("div",{className:"stars"}),Object(c.jsx)("div",{className:"twinkling"})]})}),g=t(3),O=t(12),S=t(7);g.b.add(O.a,S.b,S.a),o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.9958868b.chunk.js.map