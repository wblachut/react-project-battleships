(this["webpackJsonpreact-project-battleships"]=this["webpackJsonpreact-project-battleships"]||[]).push([[0],{11:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),r=a.n(n),i=a(6),o=a.n(i),s=(a(21),a(22),a(4)),d=a(3),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ship",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",c={name:e,size:t,direction:a,hitState:Array(t).fill("o"),hit:function(){var e=c.hitState.findIndex((function(e){return"o"===e}));c.hitState[e]="hit"},isSunk:function(){return!c.hitState.includes("o")}};return c},m=function(e,t){var a=function(e){var t={side:e,board:[],ships:[],shipCount:0,isReady:!1,isGameOver:!1,emptyBoard:function(){return[["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_","_","_"]]},makeBoard:function(){t.board=t.emptyBoard(),t.shipCount=0,t.isReady=!1,t.isGameOver=!1},createShips:function(e){return"dark"===e?[l("TIE-fighter",1),l("TIE-fighter",1),l("TIE-bomber",2),l("TIE-bomber",2),l("Star Destroyer",3),l("Super Star Destroyer",4)]:[l("Shuttle",1),l("Shuttle",1),l("X-wing starfighter",2),l("X-wing starfighter",2),l("CR90 corvette",3),l("MC80 Star Cruiser",4)]},getShips:function(){var e=t.createShips();return e.map((function(e,t){return e.id=t+1})),t.ships=e,e},changeShipDirection:function(e){"horizontal"===e.direction&&e.size>1?e.direction="vertical":e.direction="horizontal"},receiveAttack:function(e,a){var c=!0,n=t.board[a-1][e-1];if("_"===n||"*"===n)t.board[a-1][e-1]="\u2022";else if(Number.isInteger(parseInt(n))){var r=t.ships[parseInt(n)-1];r.hit(),t.board[a-1][e-1]="\u203b",r.isSunk()&&(t.markShipArea("\u2022",r),t.shipCount--,t.checkGameOver(),!0===t.isGameOver&&console.log("GAME OVER!"))}else c=!1;return c},checkPlacement:function(e,a,c){a=parseFloat(a),c=parseFloat(c);var n=!0;if("horizontal"===e.direction){if(e.size+a-1>10)return void(n=!1);for(var r=0;r<e.size;r++)if("_"!==t.board[c-1][a-1+r])return void(n=!1)}else if("vertical"===e.direction){if(e.size+c-1>10)return void(n=!1);for(var i=0;i<e.size;i++)"_"!==t.board[c-1+i][a-1]&&(n=!1)}return n},placeShip:function(e,a,c){return!!(t.shipCount<6&&t.checkPlacement(e,a,c))&&("horizontal"===e.direction?e.hitState.forEach((function(n,r){t.board[c-1][a-1+r]="".concat(e.id)})):"vertical"===e.direction&&e.hitState.forEach((function(n,r){t.board[c-1+r][a-1]="".concat(e.id)})),t.markShipArea("*",e,a,c),e.onBoard=!0,e.coordinates=[parseFloat(a),parseFloat(c)],t.shipCount++,6===t.shipCount&&(t.isReady=!0),!0)},markShipArea:function(e,a){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.coordinates[0],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.coordinates[1];a.hitState.forEach((function(r,i){"horizontal"===a.direction?(n<10&&(t.board[n][c-1+i]="".concat(e)),n>1&&(t.board[n-2][c-1+i]="".concat(e)),c>1&&(n>1&&(t.board[n-2][c-2]="".concat(e)),t.board[n-1][c-2]="".concat(e),n<10&&(t.board[n][c-2]="".concat(e))),c-1+a.size<10&&(n>1&&(t.board[n-2][c-1+a.size]="".concat(e)),t.board[n-1][c-1+a.size]="".concat(e),n<10&&(t.board[n][c-1+a.size]="".concat(e)))):"vertical"===a.direction&&(c<10&&(t.board[n-1+i][c]="".concat(e)),c>1&&(t.board[n-1+i][c-2]="".concat(e)),n>1&&(c>1&&(t.board[n-2][c-2]="".concat(e)),t.board[n-2][c-1]="".concat(e),c<10&&(t.board[n-2][c]="".concat(e))),n-1+a.size<10&&(c>1&&(t.board[n-1+a.size][c-2]="".concat(e)),t.board[n-1+a.size][c-1]="".concat(e),c<10&&(t.board[n-1+a.size][c]="".concat(e))))}))},placeShipsAtRandom:function(){for(var e=Object(d.a)(t.ships).reverse();t.shipCount<6;)e.forEach((function(e){t.randomlyPlaceShip(e)}))},randomlyPlaceShip:function(e){if(!0!==e.onBoard){var a=Math.ceil(10*Math.random()),c=Math.ceil(10*Math.random());2*Math.random()>1&&t.changeShipDirection(e),t.placeShip(e,a,c),t.randomlyPlaceShip(e)}},checkGameOver:function(){return 0===t.shipCount&&(t.isGameOver=!0,!0)}};return t}(e);return a.makeBoard(),a.getShips("".concat(e)),"computer"===t&&a.placeShipsAtRandom(),function(e,t){var a=arguments.length>3?arguments[3]:void 0,c={name:e,side:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"human",gameBoard:a,lastAIMove:"",nextAIMove:"",isWinner:!1,isMakingMove:!1,makeMove:function(e,t,a){return!!e.gameBoard.receiveAttack(t,a)},makeAIMove:function(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){console.log("Smart AI, ha ha !");var t=c.lastAIMove[0],n=c.lastAIMove[1],r=c.lastAIMove[2];if(console.log(t,n),"\u203b"===r){if("down"===c.nextAIMove&&!0===e.gameBoard.receiveAttack(t-1,n))return console.log("was a hit moving down"),void e.gameBoard.receiveAttack(t-1,n);if("up"===c.nextAIMove&&!0===e.gameBoard.receiveAttack(t+1,n))console.log("was a hit moving up"),e.gameBoard.receiveAttack(t+1,n);else if("left"===c.nextAIMove&&!0===e.gameBoard.receiveAttack(t,n-1))console.log("was a hit moving left"),e.gameBoard.receiveAttack(t,n-1);else{if("right"!==c.nextAIMove||!0!==e.gameBoard.receiveAttack(t,n+1))return;console.log("was a hit moving right"),e.gameBoard.receiveAttack(t,n+1)}}else"\u2022"===r&&("down"===c.nextAIMove&&!0===e.gameBoard.receiveAttack(t+1,n)?(c.nextAIMove="up",e.gameBoard.receiveAttack(t+1,n)):"up"===c.nextAIMove&&!0===e.gameBoard.receiveAttack(t,n-1)?(c.nextAIMove="left",e.gameBoard.receiveAttack(t-1,n)):"left"===c.nextAIMove&&!0===e.gameBoard.receiveAttack(t,n-1)?(c.nextAIMove="right",e.gameBoard.receiveAttack(t-1,n)):"right"===c.nextAIMove&&(c.nextAIMove="",c.makeAIMove()))}var i=Math.ceil(10*Math.random()),o=Math.ceil(10*Math.random());if(e.gameBoard.receiveAttack(i,o))return e.gameBoard.receiveAttack(i,o),c.lastAIMove=[i,o,a.board[o]],"\u203b"===e.gameBoard.board[o]&&""===c.nextAIMove&&(c.nextAIMove="down"),!0;c.makeAIMove(e)},passMove:function(e){c.isMakingMove=!1,e.isMakingMove=!0}};return c}("dark"===e?"Lord Sith":"Jedi Master",e,t,a)},h=a(31),u=a(12),p=function(){return Object(c.jsxs)("header",{className:"header",children:[Object(c.jsxs)("div",{className:"header-row",children:[Object(c.jsxs)("h1",{className:"col-sm-8",children:[Object(c.jsx)("span",{className:"title-main",children:"StarShips "})," "]}),Object(c.jsx)("a",{href:"https://github.com/wblachut/react-project-battleships",className:"gh-btn",children:Object(c.jsx)(u.a,{icon:["fab","github"],className:"gh-icon"})})]}),Object(c.jsx)("nav",{})]})},b=(a(11),function(e){var t=e.setAppStatus;return Object(c.jsx)("div",{className:"fade",children:Object(c.jsx)("section",{className:"star-wars-intro",onClick:function(){t("newGame")},children:Object(c.jsxs)("div",{className:"crawl",children:[Object(c.jsxs)("div",{className:"title",children:[Object(c.jsx)("p",{children:"Episode XII"}),Object(c.jsx)("h1",{children:"The Starships"})]}),Object(c.jsx)("p",{children:"It is a browser battleships game react application styled on the Star Wars movie by George Lucas. This project was realized on learning purpose for The Odin Project curriculum. Main aim of the project is to build game logic using Test Driven Development. I hope you enjoy it."}),Object(c.jsx)("br",{}),Object(c.jsx)("p",{className:"p-center",children:"Confront the sith lord..."}),Object(c.jsx)("br",{}),Object(c.jsx)("p",{className:"p-center",children:"May the force be with you jedi master!"}),Object(c.jsx)("br",{}),Object(c.jsx)("p",{className:"p-center",children:"Click on the screen to continue to the game!"})]})})})}),j=function(e){var t=e.setAppStatus,a=e.setWinner;return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"new-game",children:Object(c.jsx)("div",{className:"new-game-wrapper"})}),Object(c.jsx)("button",{className:"new-game-btn star-btn",onClick:function(){t("game"),a(null)},children:"Contend the Empire"})]})},v=(a(28),function(e){var t=e.player,a=e.board,n=e.isGameReady;return Object(c.jsxs)("div",{className:"".concat(t.side," game-board"),children:[Object(c.jsxs)("div",{className:"".concat(t.side," side-title"),children:["The ",t.side," side"]}),Object(c.jsxs)("div",{className:"outer-wrapper",children:[Object(c.jsxs)("div",{className:"board-wrapper",children:[Object(c.jsx)("div",{className:"column-description",children:a.map((function(e,t){return Object(c.jsxs)("div",{className:"numbers",children:[" ",[t+1]," "]},[t+1])}))}),Object(c.jsxs)("div",{className:"inner-wrapper",children:[Object(c.jsxs)("div",{className:"".concat(t.side," row-description"),children:[" ",a.map((function(e,t){return Object(c.jsxs)("div",{className:"letters",children:[" ",(t+10).toString(36)," "]},"letter".concat(t))}))]}),Object(c.jsxs)("div",{className:"".concat(t.side," grid-wrapper ").concat(t.type),children:[t.gameBoard.board.map((function(a,r){return a.map((function(a,i){if("human"===t.type){if("_"===a||"*"===a)return"_"!==a||n?Object(c.jsx)("div",{className:"cell","data-cord":[r+1,i+1]},[r+1,i+1]):Object(c.jsx)("div",{className:"cell droppable","data-cord":[r+1,i+1],onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault(),e.target.classList.add("hover")},onDragLeave:function(e){e.preventDefault(),e.target.classList.remove("hover")},onDrop:function(t){return e.onPlaceShip(t)}},[r+1,i+1]);if(Number.isInteger(parseInt(a))){var o=t.gameBoard.ships[a-1];return Object(c.jsx)("div",{className:"cell ship ship".concat(o.id),"data-cord":[r+1,i+1],children:parseFloat(o.coordinates[0])===i+1&&parseFloat(o.coordinates[1])===r+1&&Object(c.jsx)("img",{className:"ship-img-grid ".concat(o.direction),src:"/react-project-battleships"+"/images/".concat(t.side).concat(o.id,".png"),alt:"ship-".concat(t.side).concat(o.id)})},[r+1,i+1])}return"\u203b"===a?Object(c.jsx)("div",{className:"cell hit ship","data-cord":[r+1,i+1],children:Object(c.jsx)("img",{className:"flame-gif",src:"/react-project-battleships/images/flame.gif",alt:"flames"})},[r+1,i+1]):Object(c.jsx)("div",{className:"cell empty","data-cord":[r+1,i+1],children:"\u2022"},[r+1,i+1])}return"\u2022"===a?Object(c.jsx)("div",{className:"cell empty","data-cord":[r+1,i+1],children:"\u2022"},[r+1,i+1]):"\u203b"===a?Object(c.jsx)("div",{className:"cell hit","data-cord":[r+1,i+1],children:Object(c.jsx)("img",{className:"flame-gif",src:"/react-project-battleships/images/flame.gif",alt:"as"})},[r+1,i+1]):Object(c.jsx)("div",{className:"cell","data-cord":[r+1,i+1],onClick:function(t){return e.onMakeMove(t)}},[r+1,i+1])}))}))," "]})]})]}),!n&&Object(c.jsxs)("div",{className:"ship-wrapper",children:[Object(c.jsxs)("div",{className:"button-container",children:[Object(c.jsx)("button",{className:"star-btn",onClick:e.onPlaceRandomly,children:"Place randomly"}),Object(c.jsx)("button",{className:"star-btn",onClick:e.onResetBoard,children:"Reset Board"}),Object(c.jsx)("button",{className:"star-btn",onClick:e.onFlipShips,children:"Flip Ships"})]}),t.gameBoard.ships.map((function(e){return!e.onBoard&&Object(c.jsx)("div",{className:"ship-view",children:Object(c.jsx)("img",{className:"ship-img ".concat(e.direction),src:"/react-project-battleships"+"/images/".concat(t.side).concat(e.id,".png"),alt:"ship-".concat(t.side).concat(e.id),"data-ship":e.id,draggable:!0,onDragStart:function(e){e.dataTransfer.setData("ship",e.target.dataset.ship)}},"ship-".concat(t.side).concat(e.id))},"ship".concat(e.id))}))]})]}),!n&&Object(c.jsx)("div",{className:"button-container",children:Object(c.jsx)("button",{className:"start-game-btn star-btn",onClick:e.onStartGame,children:"Start Game"})})]})}),g=function(e){var t=e.player,a=e.opponent,r=Object(n.useState)(!1),i=Object(s.a)(r,2),o=i[0],l=i[1],m=Object(n.useState)(Object(d.a)(t.gameBoard.board)),u=Object(s.a)(m,2),p=u[0],b=u[1],j=Object(n.useState)(Object(d.a)(a.gameBoard.board)),g=Object(s.a)(j,2),f=g[0],O=g[1],x=Object(n.useState)(a.gameBoard.shipCount),_=Object(s.a)(x,2),S=_[0],A=_[1];Object(n.useEffect)((function(){M()}),[p]),Object(n.useEffect)((function(){y()}),[S]);var k=function(){t.gameBoard.makeBoard(),t.gameBoard.getShips(),b(Object(d.a)(t.gameBoard.board))},B=function(){a.makeAIMove(t),b(Object(d.a)(t.gameBoard.board)),t.gameBoard.isGameOver&&N(a)},N=function(t){setTimeout((function(){e.setWinner(t),e.setAppStatus("announcer")}),500)},M=function(){t.gameBoard.ships.map((function(e){w(t,e)}))},y=function(){a.gameBoard.ships.map((function(e){!0===e.isSunk()&&w(a,e)}))},w=function(e,t){if(t.onBoard){var a=[t.coordinates[1],t.coordinates[0]],c=document.querySelector(".".concat(e.side)).querySelector('div[data-cord="'.concat(a,'"]'));if(!c.querySelector(".ship-img-grid")){var n=document.createElement("img");n.src="/react-project-battleships"+"/images/".concat(e.side).concat(t.id,".png"),n.alt="ship-".concat(e.side).concat(t.id),n.classList.add("ship-img-grid"),n.classList.add(t.direction),n.targetAble=!1,c.appendChild(n)}}};return Object(c.jsx)("div",{children:o?Object(c.jsxs)("div",{className:"game",children:[Object(c.jsx)(v,{player:t,board:p,isGameReady:o}),Object(c.jsx)(v,{player:a,board:f,onMakeMove:function(e){var c=e.target.dataset.cord.split(",")[0],n=e.target.dataset.cord.split(",")[1];!0===t.makeMove(a,n,c)&&(O(Object(d.a)(a.gameBoard.board)),A(a.gameBoard.shipCount),a.gameBoard.isGameOver&&N(t),B())},isGameReady:o})]}):Object(c.jsx)("div",{className:"game",children:Object(c.jsx)(h.a,{in:!o,timeout:1e3,classNames:"swipe",children:Object(c.jsx)(v,{player:t,board:p,isGameReady:o,setGameReady:l,onFlipShips:function(){t.gameBoard.ships.forEach((function(e){e.onBoard||t.gameBoard.changeShipDirection(e)})),b(Object(d.a)(t.gameBoard.board))},onPlaceShip:function(e){var a=e.target.dataset.cord.split(",")[0],c=e.target.dataset.cord.split(",")[1],n=e.dataTransfer.getData("ship"),r=t.gameBoard.ships[n-1];t.gameBoard.placeShip(r,c,a),b(Object(d.a)(t.gameBoard.board))},onPlaceRandomly:function(){k(),t.gameBoard.placeShipsAtRandom(),b(Object(d.a)(t.gameBoard.board))},onResetBoard:k,onStartGame:function(){t.gameBoard.isReady&&l(!0)}})})})})},f=g;g.defaultProps={player:{},board:{},setBoard:function(){},opponent:{},opponentBoard:[],setOpponentBoard:function(){},PlayerOne:{},PlayerTwo:{},gameReady:!1,setGameReady:function(){},winner:{},setWinner:function(){},setAppStatus:function(){}};var O=function(e){var t=e.winner,a=e.setAppStatus;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"announcer ".concat(t.side),children:[Object(c.jsxs)("h1",{children:[t.name," has won!"]}),"light"===t.side&&Object(c.jsxs)("h2",{children:["Hrrmmm. A true leader you are. About your tactical prowess all galaxies should know !",Object(c.jsx)("div",{className:"img-wrapper ".concat(t.side)})]}),"dark"===t.side&&Object(c.jsxs)("h2",{children:["You don\u2019t know the power of the dark side! I must obey my master..."," ",Object(c.jsx)("div",{className:"img-wrapper ".concat(t.side)})]})]}),Object(c.jsx)("button",{className:"new-game-btn star-btn",onClick:function(){a("newGame")},children:"Play again!"})]})},x=(a(29),function(){var e=Object(n.useState)("intro"),t=Object(s.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),d=o[0],l=o[1],u=m("light","human"),v=m("dark","computer");console.clear();var g=2e3;return Object(c.jsxs)("div",{children:[Object(c.jsx)(p,{}),Object(c.jsx)(h.a,{in:"intro"===a,timeout:g,classNames:"trans",unmountOnExit:!0,onExited:function(){return r("newGame")},children:Object(c.jsx)(b,{setAppStatus:r,appStatus:a})}),Object(c.jsx)(h.a,{in:"newGame"===a,timeout:g,classNames:"trans",unmountOnExit:!0,children:Object(c.jsx)(j,{setAppStatus:r,setWinner:l})}),Object(c.jsx)(h.a,{in:"game"===a,timeout:g,classNames:"trans",unmountOnExit:!0,children:Object(c.jsx)(f,{player:u,opponent:v,setWinner:l,winner:d,setAppStatus:r})}),Object(c.jsx)(h.a,{in:"announcer"===a,timeout:g,classNames:"trans",unmountOnExit:!0,children:Object(c.jsx)(O,{winner:d,setAppStatus:r})}),Object(c.jsx)("div",{className:"stars"}),Object(c.jsx)("div",{className:"twinkling"})]})}),_=a(5),S=a(13);_.b.add(S.a),o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.3b20f0c9.chunk.js.map